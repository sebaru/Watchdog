\section{Ajout, retrait, édition d'un enregistrement}
Il est possible d'interagir avec les bases de données Watchdog. Pour cela, nous proposons 3 schémas différents,
constituant les 3 opérations de base.
Du point de vue réseau, nous voulons minimiser le traffic sur les différents liens. Nous ne transmettrons donc
que le strict necessaire à chaque échange de paquet. Nous avons donc pour chaque structure définissant nos
bases de données, plusieurs structures dégénérées issues de ces structures initiales. Chaque opération
de base aura sa propre structure, définissant ainsi les structures  ID, EDIT, ADD, et SHOW. Par convention
de nommage, nous appelerons ces structures de la manière suivante:
\begin{itemize}
\item préfixe: CMD, car elles circulent sur le reseau.
\item son type: ID, EDIT, ADD, SHOW
\item suffixe: le nom de la structure initiale.\\
\end{itemize}

Par exemple, la structure {\bf UTILISATEUR} se dégénère en ces 4 structures:
\begin{itemize}
\item CMD\_ID\_UTILISATEUR
\item CMD\_ADD\_UTILISATEUR
\item CMD\_EDIT\_UTILISATEUR
\item CMD\_SHOW\_UTILISATEUR\\
\end{itemize}

\subsubsection{Le type SHOW}
Cette structure permet de fournir au client tous les champs necessaire à la visualisation de l'enregistrement.
En règle générale, il s'agit simplement des champs de la structure initiale, visibles dans les listes de
l'interface graphique cliente. Pour assurer une facilité de recherche, le champ {\bf id} sera toujours présent
dans les structures dégénérées envoyées au client.

\subsubsection{Le type ID}
Ce type est surtout utilisé lors d'une requete client concernant la suppression ou l'édition d'un enregistrement.
En effet, les seuls champs utiles lors de cette demande son les champs {\bf id} pour la recherche effective,
et le champ {\bf nom} (ou libellé), pour un renvoi sur erreur explicite.

\subsubsection{Le type ADD}
Envoyée par le client lors d'un ajout d'enregistrement, elle contient uniquement les champs dont le serveur
ne peut pas donner une valeur. Par exemple, cette structure  ne contiendra jamais le champ {\bf id}: c'est en
effet au serveur de calculer cette valeur. Par contre elle contiendra un champ {\bf nom}.

\subsubsection{Le type EDIT}
Cette structure, aussi bien utilisée en émission par le client que par le serveur, permet d'échanger des champs
de la structure initiale qui sont modifiables.

\subsection{Exemple de dégénérécence}
Nous détaillons ce principe sur la figure \ref{Structure_degenere}.

\dessin{Structure_degenere}{Dégénérécence des strutures pour économiser la bande passante}

%**************************************************************************************************************
\subsection{Ajout d'un enregistrement}
L'ajout d'un enregistrement s'effectue grâce au tag reseau {\bf ADD\_xxx} ou xxx est le nom
de la structure initiale de l'enregistrement. Changeons notre exemple au profit des groupes, et regardons
la figure \ref{Ajout_groupe} associée.

\dessin{Ajout_groupe}{Ajout d'un enregistrement: exemple d'ajout d'un groupe}

%**************************************************************************************************************
\subsection{Retrait d'un enregistrement}
L'élimination enregistrement s'effectue grâce au tag reseau {\bf DEL\_xxx} ou xxx est le nom
de la structure initiale de l'enregistrement. Continuons sur notre exemple des groupes, via la figure
\ref{Retrait_groupe} associée.

\dessin{Retrait_groupe}{Elimination d'un enregistrement}

%**************************************************************************************************************
\subsection{Edition d'un enregistrement}
L'édition d'un enregistrement est un peu plus compliquée. En effet, elle s'effectue en 2 temps. Le premier
est l'acquisition par le client des champs modifiables de l'enregistrement (tag {\bf EDIT\_xxx}).
Le second est la confirmation des changements (tag {\bf VALIDE\_EDIT\_xxx}).
La figure \ref{Edit_groupe} illustre ce principe.

\dessin{Edit_groupe}{Edition d'un enregistrement}

%\dessin{Proto_etat_client}{essai1}
%\dessin{Proto_etat_client_root}{essai2}
